// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model ProductStore {
  id         Int          @id @default(autoincrement())
  accountId  String       @map("アカウントID")
  productId  Int          @map("商品ID")
  price      Int          @map("値段")
  productName String      @map("商品名")
  Account    Account      @relation(fields: [accountId], references: [id])
  Product    Product      @relation(fields: [productId], references: [id])
  OrderHistories OrderHistory[]
  Logs       Log[]
}

model OptionStore {
  id           Int          @id @default(autoincrement())
  accountId    String       @map("アカウントID")
  optionId     Int          @map("オプションID")
  price        Int          @map("値段")
  optionName   String       @map("オプション名")
  Account      Account      @relation(fields: [accountId], references: [id])
  Option       Option       @relation(fields: [optionId], references: [id])
  ProductOptionStores ProductOptionStore[]
}

model ProductOptionStore {
  optionStoreId Int          @map("オプションID")
  productStoreId Int         @map("商品ID")
  OptionStore   OptionStore  @relation(fields: [optionStoreId], references: [id])
  ProductStore  ProductStore @relation(fields: [productStoreId], references: [id])
  @@id([optionStoreId, productStoreId])
}

model Table {
  id        Int           @id @default(autoincrement())
  tableName String        @map("テーブル名") @db.VarChar(10)
  OrderHistories OrderHistory[]
}

model OrderHistory {
  id          Int       @id @default(autoincrement())
  tableId     String    @map("テーブルID")
  productStoreId Int     @map("商品ID")
  quantity    Int       @map("個数")
  price       Int       @map("値段")
  provided    Boolean   @map("提供")
  Table       Table     @relation(fields: [tableId], references: [id])
  ProductStore ProductStore @relation(fields: [productStoreId], references: [id])
}

model Log {
  id           Int        @id @default(autoincrement())
  tableName    String     @map("テーブル名")
  productStoreId Int       @map("商品ID")
  quantity     Int        @map("個数")
  timeStamp    DateTime   @map("タイムスタンプ") @default(now())
  ProductStore ProductStore @relation(fields: [productStoreId], references: [id])
}
